package codes;

import java.util.Scanner;

public class TicketCounterStack {
    public static void main(String[] args) {
        Scanner input = new Scanner(System.in);
        Stack ticketStack = null;

        System.out.println("Choose stack type:");
        System.out.println("1. Create empty stack");
        System.out.println("2. Create stack with existing persons");

        int initChoice = input.nextInt();
        input.nextLine(); // consume newline

        if (initChoice == 1) {
            System.out.print("Enter desired stack size: ");
            int size = input.nextInt();
            input.nextLine();
            ticketStack = new Stack(size);
        } else if (initChoice == 2) {
            System.out.print("How many persons? ");
            int total = input.nextInt();
            input.nextLine();
            Person[] peopleArray = new Person[total];

            for (int i = 0; i < total; i++) {
                System.out.print("Enter name: ");
                String name = input.nextLine();

                System.out.print("Enter age: ");
                int age = input.nextInt();
                input.nextLine();

                System.out.print("Enter gender (MALE/FEMALE/OTHER): ");
                Gender gender = Gender.valueOf(input.nextLine().toUpperCase());

                peopleArray[i] = new Person(name, age, gender);
            }
            ticketStack = new Stack(peopleArray);
        }

        int option;
        do {
            System.out.println("\n--- Ticket Counter Menu ---");
            System.out.println("1. Push one person");
            System.out.println("2. Push two persons");
            System.out.println("3. Pop one person");
            System.out.println("4. Pop multiple persons");
            System.out.println("5. Show entire stack");
            System.out.println("6. Show top N persons");
            System.out.println("7. Exit");
            System.out.print("Your option: ");
            option = input.nextInt();
            input.nextLine();

            switch (option) {
                case 1:
                    System.out.print("Enter name: ");
                    String name1 = input.nextLine();
                    System.out.print("Enter age: ");
                    int age1 = input.nextInt();
                    input.nextLine();
                    System.out.print("Enter gender (MALE/FEMALE/OTHER): ");
                    Gender g1 = Gender.valueOf(input.nextLine().toUpperCase());
                    ticketStack.push(new Person(name1, age1, g1));
                    break;

                case 2:
                    // Person 1
                    System.out.print("Enter name for Person 1: ");
                    String n1 = input.nextLine();
                    System.out.print("Enter age: ");
                    int a1 = input.nextInt();
                    input.nextLine();
                    System.out.print("Enter gender (MALE/FEMALE/OTHER): ");
                    Gender g11 = Gender.valueOf(input.nextLine().toUpperCase());

                    // Person 2
                    System.out.print("Enter name for Person 2: ");
                    String n2 = input.nextLine();
                    System.out.print("Enter age: ");
                    int a2 = input.nextInt();
                    input.nextLine();
                    System.out.print("Enter gender (MALE/FEMALE/OTHER): ");
                    Gender g22 = Gender.valueOf(input.nextLine().toUpperCase());

                    ticketStack.push(new Person(n1, a1, g11), new Person(n2, a2, g22));
                    break;

                case 3:
                    Person popped = ticketStack.pop();
                    if (popped != null) {
                        System.out.print("Popped Person: ");
                        popped.displayPerson();
                    }
                    break;

                case 4:
                    System.out.print("How many persons to pop? ");
                    int n = input.nextInt();
                    input.nextLine();
                    ticketStack.pop(n);
                    break;

                case 5:
                    ticketStack.display();
                    break;

                case 6:
                    System.out.print("Enter how many top persons to show: ");
                    int topN = input.nextInt();
                    input.nextLine();
                    ticketStack.display(topN);
                    break;

                case 7:
                    System.out.println("Thank you. Exiting...");
                    break;

                default:
                    System.out.println("Invalid choice. Try again.");
            }

        } while (option != 7);

        input.close();
    }
}
